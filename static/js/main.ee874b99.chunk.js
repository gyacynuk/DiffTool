(this["webpackJsonpdiff-tool"]=this["webpackJsonpdiff-tool"]||[]).push([[0],{44:function(e,t,n){e.exports=n.p+"static/media/edit_distance.6aca0a77.png"},45:function(e,t,n){e.exports=n.p+"static/media/matrix.6478087f.png"},52:function(e,t,n){e.exports=n(63)},57:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(35),o=n.n(i),l=(n(57),n(14)),c=n(23),u=n(26),s=n(31),m=n(29),d=n(34),f=n(30),h=n(20),p=n(8),E=n(15);function g(){var e=Object(h.a)(["\n    color: #17A2B8;\n    text-decoration: none;\n"]);return g=function(){return e},e}function b(){var e=Object(h.a)(["\n    color: #FFF;\n    text-align: center;\n"]);return b=function(){return e},e}var w=Object(E.d)(p.f)(b()),y=Object(E.d)(p.f)(g()),v=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{backgroundColor:"#333",width:1,p:5},r.a.createElement(w,{variant:"h1"},"Text Comparison Tool"),r.a.createElement(w,{variant:"h4"},"Project by ",r.a.createElement(y,{forwardedAs:"a",href:"https://www.linkedin.com/in/griffin-yacynuk/",target:"_blank",rel:"noopener noreferrer"},"Griffin Yacynuk")),r.a.createElement(E.a,{row:!0,justifyContent:"center"},r.a.createElement(E.a,{col:"auto",forwardedAs:"a",href:"https://www.linkedin.com/in/griffin-yacynuk/",target:"_blank",rel:"noopener noreferrer",mx:2},r.a.createElement(w,{variant:"h4"},r.a.createElement("i",{className:"fab fa-linkedin"}))),r.a.createElement(E.a,{col:"auto",forwardedAs:"a",href:"https://github.com/gyacynuk",target:"_blank",rel:"noopener noreferrer",mx:2},r.a.createElement(w,{variant:"h4"},r.a.createElement("i",{className:"fab fa-github"})))))}}]),t}(a.Component);function j(){var e=Object(h.a)([" \n    font-family: 'Inconsolata', monospace;\n    white-space: nowrap;\n    overflow: auto;\n"]);return j=function(){return e},e}var D=Object(E.d)(p.g)(j()),O=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{row:!0},r.a.createElement(E.a,{col:{xs:1,md:.5},p:2},r.a.createElement(p.f,{variant:"h4"},"New Document"),r.a.createElement(D,{scale:"base",rows:10,defaultValue:this.props.newDocument,onChange:function(t){return e.props.updateDocument(t.target,!0)}})),r.a.createElement(E.a,{col:{xs:1,md:.5},p:2},r.a.createElement(p.f,{variant:"h4"},"Old Document"),r.a.createElement(D,{scale:"base",rows:10,defaultValue:this.props.oldDocument,onChange:function(t){return e.props.updateDocument(t.target,!1)}}))))}}]),t}(a.Component);function S(){var e=Object(h.a)(["\n    border: 1px solid rgba(0, 0, 0, 0.125);\n    border-radius: 4px;\n    overflow: scroll;\n"]);return S=function(){return e},e}var k=Object(E.d)(E.a)(S()),N=n(44),x=n.n(N),T=n(45),I=n.n(T);function C(){var e=Object(h.a)(["\n    font-family: 'Inconsolata', monospace;\n"]);return C=function(){return e},e}function A(){var e=Object(h.a)(["\n    max-width: 576px;\n    width: 100%;\n    height: auto;\n    object-fit: contain; \n    margin-bottom: -3px;\n"]);return A=function(){return e},e}var F=E.d.img(A()),L=Object(E.d)(p.f)(C()),R=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.f,{variant:"h2"},"Background"),r.a.createElement(p.d,null),r.a.createElement(p.f,{variant:"p"},"This project was inspired by the difficulties a friend of mine was experiencing at work while trying to build a webpage which compared two JSON files. He wanted to highlight the differences between the two files and display this to the user, and he was able to find a component on NPM to do so. However, the component would naively compare each line from one file with the same line in the other. This was not ideal, since if one file had additions or deletions, they wouldn't be displayed properly. Since JSON files are highly structured, he was able to detect insertions or deletions by comparing the set of keys in each JSON object - then for each descripency he would insert a corresponding blank line in the other file. When applied recusively to all nested sub-objects, this approach fixed the issue, but it got me thinking that ",r.a.createElement("em",null,"there must be a better way to do this."),r.a.createElement("br",null),r.a.createElement("br",null),"I had a lot of ideas bouncing around in my head, many of which drawn from the book",r.a.createElement("em",null,"Algorithms")," by Sanjoy Dasgupta et al. which I had been reading during my morning commute. That day I had happened to be reading the chapter on dynamic programming, and I had the Wagner\u2013Fischer algorithm for solving edit distance between two string still fresh in my mind. I figured that with some work, I could adapt that algorithm to instead solve edit distance between two documents instead. And from that, this project was born.",r.a.createElement("br",null),r.a.createElement("br",null),"If you're interested in how the original edit distance algorithm works, or the steps I took to adapt it to work with entire documents, then keep reading into the next section. If instead you want to play around with the algorithm youself, go ahead and scroll to the bottom of the page for a demo."),r.a.createElement(p.f,{variant:"h2",mt:5},"Algorithm Overview"),r.a.createElement(p.d,null),r.a.createElement(p.f,{variant:"p"},"Edit distance is defined as the minimum number of operations needed to make two strings equal, where an operation can be:",r.a.createElement("ul",null,r.a.createElement("li",null,"Inserting a new character"),r.a.createElement("li",null,"Deleting a charcter"),r.a.createElement("li",null,"Substituting a character for another")),"For instance, given the words ",r.a.createElement(L,null,"Saturday")," and ",r.a.createElement(L,null,"Sunday"),", the edit distance between them is 3; we must insert the letters ",r.a.createElement(L,null,"a")," and\xa0",r.a.createElement(L,null,"t")," to ",r.a.createElement(L,null,"Sunday"),", and then replace the letter\xa0",r.a.createElement(L,null,"n")," with ",r.a.createElement(L,null,"r"),". I have illistrated this in the figure below:"),r.a.createElement(E.a,{row:!0,justifyContent:"center",p:3},r.a.createElement(k,{col:{xs:1,sm:"auto"}},r.a.createElement(F,{src:x.a}))),r.a.createElement(p.f,{variant:"p"},"Solving for the edit distance between two strings lends itself well to dynamic programming, as we can break the problem down into small subproblems which can be reused multiple times. For instance, let's return to our example above, using the words ",r.a.createElement(L,null,"Saturday"),"\xa0and ",r.a.createElement(L,null,"Sunday"),". Let's also assume we know that the edit distance for the following pairs:",r.a.createElement("ol",{type:"a"},r.a.createElement("li",null,r.a.createElement(L,null,"Saturday"),", ",r.a.createElement(L,null,"Sunda")),r.a.createElement("li",null,r.a.createElement(L,null,"Saturda"),", ",r.a.createElement(L,null,"Sunday")),r.a.createElement("li",null,r.a.createElement(L,null,"Saturda"),", ",r.a.createElement(L,null,"Sunda"))),"Then we know that the edit distance between ",r.a.createElement(L,null,"Saturday")," and\xa0",r.a.createElement(L,null,"Sunday")," is the minimum of the following:",r.a.createElement("ul",null,r.a.createElement("li",null,"Edit distance a) + 1 to insert ",r.a.createElement(L,null,"y")," into ",r.a.createElement(L,null,"Sunda"),", or equivalently delete ",r.a.createElement(L,null,"y")," from ",r.a.createElement(L,null,"Saturday")),r.a.createElement("li",null,"Edit distance b) + 1 to insert ",r.a.createElement(L,null,"y")," into ",r.a.createElement(L,null,"Saturda"),", or equivalently delete ",r.a.createElement(L,null,"y")," from ",r.a.createElement(L,null,"Sunday")," "),r.a.createElement("li",null,"Edit distance c) + 1 the following pair of characters (",r.a.createElement(L,null,"y, y"),") are not equal and hence we have to substitue one, or + 0 if they are equal")),"We can generalize this as follows: given two strings denoted as ",r.a.createElement(L,null,"A, B"),", let ",r.a.createElement(L,null,"d(i, j)")," denote the edit distance between the substring of the first ",r.a.createElement(L,null,"i")," character of ",r.a.createElement(L,null,"A")," and the first ",r.a.createElement(L,null,"j")," characters of ",r.a.createElement(L,null,"B"),". Then we have:",r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement(L,null,"d(i, j) = min( d(i-1, j)+1, d(i, j-1)+1, d(i-1, j-1) + diff(A[i], B[j])")),r.a.createElement("br",null),"where ",r.a.createElement(L,null,"CodeText(A[i], B[j])")," is equal to 1 if the characters ",r.a.createElement(L,null,"A[i] = B[j]"),", otherwise 0."),r.a.createElement(p.f,{variant:"p",color:"#D8D8D8"},r.a.createElement("i",{className:"fas fa-square",color:"#D8D8D8"})),r.a.createElement(p.f,{variant:"p",color:"#A8F7A6"},r.a.createElement("i",{className:"fas fa-square",color:"#A8F7A6"})),r.a.createElement(p.f,{variant:"p",color:"#A088FF"},r.a.createElement("i",{className:"fas fa-square",color:"#A088FF"})),r.a.createElement(E.a,{row:!0,justifyContent:"center",p:3},r.a.createElement(k,{col:{xs:1,sm:"auto"}},r.a.createElement(F,{src:I.a}))),r.a.createElement(p.f,{variant:"h2",mt:5},"Try it Out!"),r.a.createElement(p.d,null))}}]),t}(a.Component),P=n(46),W=Object.freeze({INSERT:1,DELETE:2,REPLACE:3,NONE:4});function B(e,t){for(var n=new Array(t),a=0;a<t;a++)n[a]=new Array(e);return n}function q(e,t,n){return n<0||n>=e.length?Number.POSITIVE_INFINITY:t<0||t>=e[0].length?Number.POSITIVE_INFINITY:e[n][t]}var _=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(c.a)(this,e),this.operation=t,this.symbol=n,this.secondarySymbol=a},H=function(){function e(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(c.a)(this,e),this.newWord=t,this.oldWord=n;var r=a?function(e,t){var n=e.length+1,a=t.length+1,r=B(n,a);r[0][0]=0;for(var i=1;i<n;i++)r[0][i]=r[0][i-1]+e[i-1].length+1;for(var o=1;o<a;o++)r[o][0]=r[o-1][0]+t[o-1].length+1;for(var l=1;l<n;l++)for(var c=1;c<a;c++){var u=0;u=e[l-1]!==t[c-1]?new H(e[l-1],t[c-1],!1).minEditDistance:-r[c-1][l-1]-1,r[c][l]=Math.min(r[c-1][l]+t[c-1].length,r[c][l-1]+e[l-1].length,r[c-1][l-1]+u)+1}return r}(t,n):function(e,t){var n=e.length+1,a=t.length+1,r=B(n,a);r[0][0]=0;for(var i=1;i<n;i++)r[0][i]=r[0][i-1]+1;for(var o=1;o<a;o++)r[o][0]=r[o-1][0]+1;for(var l=1;l<n;l++)for(var c=1;c<a;c++){var u=0;e[l-1]!==t[c-1]&&(u=1),r[c][l]=Math.min(r[c-1][l],r[c][l-1],r[c-1][l-1])+u}return r}(t,n);this.minEditDistance=r[n.length][t.length],this.fullEdits=function(e,t,n){for(var a=[],r=t.length,i=n.length;0!==i||0!==r;)if(0!==q(e,r,i)){var o=q(e,r-1,i),l=q(e,r,i-1),c=q(e,r-1,i-1),u=Math.min(o,l,c);if(u===c){var s=q(e,r,i);r--,i--,c<s?a.push(new _(W.REPLACE,t[r],n[i])):a.push(new _(W.NONE,t[r]))}else u===o?(r--,a.push(new _(W.INSERT,t[r]))):(i--,a.push(new _(W.DELETE,n[i])))}else r--,i--,a.push(new _(W.NONE,t[r]));return a.reverse()}(r,t,n),this.edits=this.fullEdits.filter((function(e){return e.operation!==W.NONE}))}return Object(u.a)(e,[{key:"getNumDisjointReplacements",value:function(){if(0===this.fullEdits.length)return 0;for(var e=0,t=null,n=0;n<this.fullEdits.length;n++){var a=this.fullEdits[n].operation;a===W.REPLACE&&t!==W.REPLACE&&e++,t=a}return e}}]),e}();function J(e){return e.length>0?e[e.length-1].entityNumber:Number.NEGATIVE_INFINITY}function M(e,t){var n=J(e[W.DELETE]),a=J(e[W.INSERT]),r=J(e[W.NONE]),i=Math.max(n,a,r);return n===t-1?e[W.DELETE].pop():a===t-1?e[W.INSERT].pop():i===n?e[W.DELETE].pop():i===a?e[W.INSERT].pop():e[W.NONE].pop()}function V(e){var t=[],n=1;return e.fullEdits.forEach((function(e){t.push.apply(t,Object(P.a)(function(e,t){var n=e.operation,a=e.symbol,r=e.secondarySymbol;if(n===W.REPLACE){var i=new H(a,r,!1),o=i.fullEdits.map((function(e){return e.operation===W.REPLACE?new _(W.INSERT,e.symbol):e})).filter((function(e){return e.operation!==W.DELETE})),l=i.fullEdits.map((function(e){return e.operation===W.REPLACE?new _(W.DELETE,e.secondarySymbol):e})).filter((function(e){return e.operation!==W.INSERT}));return[new Y(W.INSERT,a,t,o),new Y(W.DELETE,r,t,l)]}return W.INSERT,[new Y(n,a,t)]}(e,n))),n++})),t}function z(e){var t=[],n=[];return e.forEach((function(e){var a=e.operation,r=e.subEditEntities;a===W.INSERT?(t.push(e),null===r&&n.push(new Y(W.NONE,"","*"))):a===W.DELETE?(n.push(e),null===r&&t.push(new Y(W.NONE,"","*"))):(t.push(e),n.push(e))})),[t,n]}var Y=function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(c.a)(this,e),this.operation=t,this.symbol=n,this.entityNumber=a,this.subEditEntities=r},G=n(37);function $(){var e=Object(h.a)(["\n    display: inline-block;\n    ",";\n"]);return $=function(){return e},e}function K(){var e=Object(h.a)(["\n    width: 32px;\n    min-width: 32px;\n    padding-right: 8px;\n    padding-left: 0px;\n    text-align: right;\n    color: #AAA;\n    background-color: rgba(0, 0, 0, .1);\n"]);return K=function(){return e},e}function Q(){var e=Object(h.a)(["\n    display: inline-block;\n    padding: 2px 8px;\n    white-space: pre;\n"]);return Q=function(){return e},e}function U(){var e=Object(h.a)(["\n    width: 100%;\n    height: auto;\n    display: inline-flex;\n    overflow: scroll;\n    text-align: left;\n    font-family: 'Inconsolata', monospace;\n    font-size: 16px;\n\n    ",";\n"]);return U=function(){return e},e}var X=l.e.div(U(),(function(e){return e.operation===W.INSERT?"background-color: #daffd9":e.operation===W.DELETE?"background-color: #ffd9df":void 0})),Z=l.e.div(Q()),ee=Object(l.e)(Z)(K()),te=l.e.div($(),(function(e){return e.operation===W.INSERT?"background-color: #a8f7a6":e.operation===W.DELETE?"background-color: #f7a6a6":void 0})),ne=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.editEntity,t=e.operation,n=e.symbol,a=e.entityNumber,i=e.subEditEntities,o=r.a.createElement("div",null,"\xa0");t===W.INSERT?o="+":t===W.DELETE&&(o="-");var l=r.a.createElement(Z,{operation:t},n);return i&&(l=r.a.createElement(Z,{operation:t},i.map((function(e,t){return r.a.createElement(te,{operation:e.operation,key:t},e.symbol)})))),r.a.createElement(X,{operation:t},r.a.createElement(ee,{operation:t},a),r.a.createElement(Z,{operation:t},o),l)}}]),t}(a.Component);function ae(){var e=Object(h.a)(["\n    display: inline-block;\n    border: 2px solid ",";\n    color: ",";\n    border-radius: 16px;\n    padding: 4px 8px;\n    margin-left: 16px;\n    font-size: 12px;\n"]);return ae=function(){return e},e}function re(){var e=Object(h.a)(["\n    margin-left: 16px;\n"]);return re=function(){return e},e}var ie=E.d.label(re()),oe=E.d.div(ae(),(function(e){return e.color}),(function(e){return e.color}));var le=function(e){var t,n=Object(G.a)({state:"viewInline"}),a=V(e.editDistance),i=r.a.createElement(k,{row:!0,m:2,mb:5},function(e){for(var t=e.reduce((function(e,t){return e[t.operation].push(t),e}),{1:[],2:[],3:[],4:[]}),n=[],a=e.length+1,r=0;r<e.length;r++){var i=M(t,a);n.push(i),a=i.entityNumber}return n.reverse()}(V(e.editDistance)).map((function(e,t){return r.a.createElement(ne,{editEntity:e,key:t})}))),o=r.a.createElement(k,{row:!0,m:2,mb:5},r.a.createElement(E.a,{col:.5},z(a)[0].map((function(e,t){return r.a.createElement(ne,{editEntity:e,key:t})}))),r.a.createElement(E.a,{col:.5},z(a)[1].map((function(e,t){return r.a.createElement(ne,{editEntity:e,key:t})})))),l=[i];return"viewSide"===n.state&&(l=[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{row:!0,mt:2},r.a.createElement(E.a,{col:!0},r.a.createElement(ie,{mx:1},r.a.createElement(p.e,{checked:e.delayedComputation,onChange:e.toggleDelayedComputation,scale:"sm",name:"xs",verticalAlign:"middle"})," Delayed Computation"),r.a.createElement(oe,{color:(t=e.diffStateString,"Done"===t?"#3bd12e":"Waiting"===t?"#17A2B8":"Processing"===t?"#AF1213":"#333")},r.a.createElement("strong",null,e.diffStateString)),r.a.createElement(p.d,null),r.a.createElement(p.c,Object.assign({},n,{"aria-label":"display options",py:1}),r.a.createElement(E.a,{row:!0,justifyContent:{md:"left"}},r.a.createElement(E.a,{col:{xs:1,md:"auto"}},r.a.createElement(ie,null,r.a.createElement(p.b,Object.assign({},n,{value:"viewInline"}))," Inline")),r.a.createElement(E.a,{col:{xs:1,md:"auto"},mt:{xs:2,md:0}},r.a.createElement(ie,null,r.a.createElement(p.b,Object.assign({},n,{value:"viewSide"}))," Side")))))),l.map((function(e){return e})))},ce=["Hello World!","Have fun playing around with my implementation of a text comparison tool,","based off of the Wagner\u2013Fischer dynamic programming algorithm for calculating","the Levenshtein distance between two strings.","I have tried to display differences in an easy-to-read format, by grouping","contiguous operations together, and by highlighting small differences between","similar lines (as seen above).","New lines appear like this","(with no per-character highlighting)","(again, with no per-character highlighting)","Finally, if you're working with large documents, consider keeping",'"Delayed Computation" on, as it will wait until you stop typing before',"recomputing the differences, instead of after each keystroke."],ue=["Hello World!","Have fun playing around with my implementation of a text diff tool,","based off of the Wagner\u2013Fischer DP algorithm for calculating","the edit distance between two strings.","I have tried to display differences in an easy-to-read format, by grouping","contiguous operations together, and by highlighting small differences between","similar lines (as seen above).","(with no per-character highlighting)","And deleted lines appear like this","(again, with no per-character highlighting)","Finally, if you're working with large documents, consider keeping",'"Delayed Computation" on, as it will wait until you stop typing before',"recomputing the differences, instead of after each keystroke."],se=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={newDocument:ce,oldDocument:ue,editDistance:new H(ce,ue),delayedComputation:!0,diffStateString:"Done"},e.computeDiffTimer=null,e.processingTimer=null,e.toggleDelayedComputation=e.toggleDelayedComputation.bind(Object(d.a)(e)),e.triggerDiffComputation=e.triggerDiffComputation.bind(Object(d.a)(e)),e.recomputeDiff=e.recomputeDiff.bind(Object(d.a)(e)),e.updateDocument=e.updateDocument.bind(Object(d.a)(e)),e.updateDiffStateString=e.updateDiffStateString.bind(Object(d.a)(e)),e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"triggerDiffComputation",value:function(){var e=this;clearTimeout(this.computeDiffTimer),this.state.delayedComputation?(this.updateDiffStateString("Waiting"),this.computeDiffTimer=setTimeout((function(){e.recomputeDiff()}),1e3)):this.recomputeDiff()}},{key:"recomputeDiff",value:function(){var e=this;this.updateDiffStateString("Processing"),clearTimeout(this.processingTimer),this.processingTimer=setTimeout((function(){var t=e.state,n=t.newDocument,a=t.oldDocument,r=new H(n,a);e.setState({editDistance:r}),e.updateDiffStateString("Done")}),100)}},{key:"updateDocument",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.state,a=n.newDocument,r=n.oldDocument;this.setState({newDocument:t?e.value.split("\n"):a,oldDocument:t?r:e.value.split("\n")}),this.triggerDiffComputation()}},{key:"toggleDelayedComputation",value:function(){this.setState({delayedComputation:!this.state.delayedComputation})}},{key:"updateDiffStateString",value:function(e){this.setState({diffStateString:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(v,null),r.a.createElement(E.a,{width:1,height:100,px:{xs:3,md:6},py:3},r.a.createElement(R,null),r.a.createElement(O,{newDocument:ce.join("\n"),oldDocument:ue.join("\n"),updateDocument:this.updateDocument}),r.a.createElement(le,{editDistance:this.state.editDistance,delayedComputation:this.state.delayedComputation,toggleDelayedComputation:this.toggleDelayedComputation,diffStateString:this.state.diffStateString}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(l.b,{theme:{colors:{text:"#000",background:"#fff",primary:"#17A2B8",modes:{dark:{text:"#fff",background:"#000",primary:"#0cf"}}}}},r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.ee874b99.chunk.js.map